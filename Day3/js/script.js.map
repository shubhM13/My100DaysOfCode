{"version":3,"sources":["script.js"],"names":["$","fromDate","toDate","myDate","getMean","myArray","mean","reduce","a","b","length","toFixed","getMedian","median","sorted","sort","middleIndex","Math","floor","medianA","medianB","processData","data","myData","myDates","meanTemps","medTemps","meanPress","medPress","meanSpeeds","medSpeeds","key","hasOwnProperty","t","p","s","push","generateChart","chart","c3","generate","x","columns","type","groups","bar","width","ratio","axis","tick","format","subchart","show","loadChart","ajax","url","jsonpCallback","dataType","startDate","formatDate","endDate","success","response","date","divider","someday","Date","month","getUTCMonth","day","getUTCDate","year","getUTCFullYear","setDate","getDate","document","forms","rangeform","from","value","to","addEventListener","e","toUTCString"],"mappings":"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","file":"script.js","sourcesContent":["$(function () {\n\n  'use strict';\n\n  var fromDate, toDate;\n  var myDate = '2005-12-31';\n\n  function getMean(myArray) {\n    var mean = myArray.reduce(function (a, b) {\n      return a + b;\n    }) / myArray.length;\n    return mean.toFixed(2);\n  } //getMean\n\n  function getMedian(myArray) {\n    var median;\n    var sorted = myArray.sort(function (a, b) {\n      return a > b;\n    });\n    var middleIndex = Math.floor(sorted.length / 2);\n\n    if (sorted.length % 2 === 0) {\n      var medianA = sorted[middleIndex];\n      var medianB = sorted[middleIndex - 1];\n      median = (medianA + medianB) / 2;\n    } else {\n      median = sorted[middleIndex];\n    }\n\n    return median.toFixed(2);\n  } //getMedian\n\n\n  function processData(data) {\n    var myData = [];\n\n    var myDates = ['x'];\n    var meanTemps = ['Mean Temperature'];\n    var medTemps = ['Median Temperature'];\n    var meanPress = ['Mean Pressure'];\n    var medPress = ['Median Pressure'];\n    var meanSpeeds = ['Mean Speed'];\n    var medSpeeds = ['Median Speed'];\n\n    for (var key in data) {\n      if (data.hasOwnProperty(key)) {\n        if (data[key].t !== null && data[key].p !== null && data[key].s !== null) {\n          myDates.push(key);\n          meanTemps.push(getMean(data[key].t));\n          medTemps.push(getMedian(data[key].t));\n          meanPress.push(getMean(data[key].p));\n          medPress.push(getMedian(data[key].p));\n          meanSpeeds.push(getMean(data[key].s));\n          medSpeeds.push(getMedian(data[key].s));\n        } //data is not null\n      } // hasOwnProperty\n    } // for key in data\n\n    myData.push(myDates, meanTemps, medTemps, meanPress, medSpeeds, meanSpeeds);\n    return myData;\n  } // Process Data\n\n  function generateChart(data) {\n    var chart = c3.generate({\n\n      data: {\n        x: 'x',\n        columns: data,\n        type: 'bar',\n        groups: [['Mean Temperature', 'Median Temperature', 'Mean Pressure', 'Median Pressure', 'Mean Speed', 'Median Speed']]\n      },\n      bar: {\n        width: {\n          ratio: 0.9\n        }\n      },\n      axis: {\n        x: {\n          type: 'timeseries',\n          tick: {\n            format: '%Y-%m-%d'\n          } // x\n        } }, // axis\n      subchart: {\n        show: true //subchart\n      } }); // chart\n  } // generateChart\n\n\n  function loadChart() {\n    $.ajax({\n      url: 'http://foundationphp.com/phpclinic/podata.php?&raw&callback=?',\n      jsonpCallback: 'jsonReturnData',\n      dataType: 'jsonp',\n      data: {\n        startDate: formatDate(fromDate, ''),\n        endDate: formatDate(toDate, ''),\n        format: 'json'\n      },\n      success: function (response) {\n        generateChart(processData(response));\n      } //success\n\n    }); //AJAX Call\n  } //load Chart\n\n  function formatDate(date, divider) {\n    var someday = new Date(date);\n    var month = someday.getUTCMonth() + 1;\n    var day = someday.getUTCDate();\n    var year = someday.getUTCFullYear();\n\n    if (month <= 9) {\n      month = '0' + month;\n    }\n    if (day <= 9) {\n      day = '0' + day;\n    }\n\n    return '' + year + divider + month + divider + day;\n  }\n\n  //set up\n\n  fromDate = new Date(myDate);\n  fromDate.setDate(fromDate.getDate() - 31);\n\n  toDate = new Date(myDate);\n  toDate.setDate(toDate.getDate() - 1);\n\n  document.forms.rangeform.from.value = formatDate(fromDate, '-');\n  document.forms.rangeform.to.value = formatDate(toDate, '-');\n\n  loadChart();\n\n  // Events -------\n\n  document.forms.rangeform.addEventListener('change', function (e) {\n    fromDate = new Date(document.rangeform.from.value);\n    toDate = new Date(document.rangeform.to.value);\n\n    fromDate = fromDate.toUTCString();\n    toDate = toDate.toUTCString();\n\n    loadChart();\n  }, false);\n}); // Page Loaded"]}